<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤íŠ¸ë ˆìŠ¤ ì·¨ì•½ì„± ê²€ì‚¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2d3748;
            line-height: 1.6;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ - ì–‡ê³  ê¸´ ì œëª© ë°•ìŠ¤ */
        .header {
            text-align: center;
            margin-bottom: 1rem;
        }

        .title-box {
            background: rgba(255,255,255,0.15); /* ë°°ê²½ë³´ë‹¤ ì•½ê°„ ë°ì€ ìƒ‰ */
            border-radius: 0.5rem;
            padding: 0.75rem 2rem; /* ì–‡ê²Œ ì¡°ì • */
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 0;
            display: inline-block;
            min-width: 400px; /* ê¸¸ê²Œ ì¡°ì • */
            max-width: 90%;
        }

        .title {
            font-size: 28px; /* ê³ ì • í¬ê¸° */
            font-weight: 800;
            color: #ffffff; /* í°ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
            margin-bottom: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .subtitle {
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            color: rgba(255,255,255,0.9); /* í°ìƒ‰ ë°˜íˆ¬ëª… */
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-top: 0.25rem;
        }

        .progress-container {
            text-align: center;
            margin-bottom: 2rem;
        }

        .progress {
            font-size: 14px; /* ê³ ì • í¬ê¸° */
            color: #718096;
            font-weight: 600;
            background: rgba(255,255,255,0.9);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            display: inline-block;
            backdrop-filter: blur(10px);
            white-space: nowrap;
        }

        .filter-text {
            font-size: 12px;
            color: #a0aec0;
            font-style: italic;
            margin-left: 0.5rem;
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background: rgba(255,255,255,0.95);
            border-radius: 1.5rem;
            padding: 2.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .intro-card {
            text-align: center;
            margin-top: 4rem;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .intro-title {
            font-size: 32px; /* ê³ ì • í¬ê¸° */
            font-weight: 900;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .intro-subtitle {
            font-size: 18px; /* ê³ ì • í¬ê¸° */
            color: #718096;
            margin-bottom: 2rem;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* QRì½”ë“œ ìŠ¤íƒ€ì¼ */
        .qr-section {
            margin-top: 2rem;
            padding: 2rem;
            background: rgba(255,255,255,0.95);
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .qr-title {
            font-size: 20px; /* ê³ ì • í¬ê¸° */
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 1rem;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .qr-description {
            font-size: 14px; /* ê³ ì • í¬ê¸° */
            color: #718096;
            margin-bottom: 1.5rem;
            text-align: center;
            line-height: 1.6;
        }

        .qr-container {
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .qr-code {
            padding: 1rem;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            min-width: 200px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qr-instructions {
            background: linear-gradient(135deg, #f7fafc, #edf2f7);
            padding: 1.5rem;
            border-radius: 1rem;
            border-left: 4px solid #667eea;
        }

        .qr-instructions h4 {
            color: #2d3748;
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            font-weight: 700;
            margin-bottom: 0.75rem;
        }

        .qr-instructions ol {
            color: #4a5568;
            font-size: 14px; /* ê³ ì • í¬ê¸° */
            padding-left: 1.5rem;
            line-height: 1.6;
        }

        .qr-instructions li {
            margin-bottom: 0.5rem;
        }

        /* ì§ˆë¬¸ ì¹´ë“œ */
        .question-card {
            margin-bottom: 1.5rem;
            min-height: 180px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .question-card.no-animation {
            animation: none !important;
        }

        .q-number {
            font-size: 18px; /* ê³ ì • í¬ê¸° */
            font-weight: 700;
            color: #667eea;
            margin-bottom: 1rem;
            text-align: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .q-text {
            font-size: 20px; /* ê³ ì • í¬ê¸° */
            line-height: 1.7;
            color: #2d3748;
            text-align: center;
            font-weight: 500;
            word-break: keep-all; /* í•œê¸€ ì¤„ë°”ê¿ˆ ë°©ì§€ */
            white-space: normal; /* ì§ˆë¬¸ í…ìŠ¤íŠ¸ëŠ” ì—¬ëŸ¬ ì¤„ í—ˆìš© */
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .primary-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1rem 2rem;
            border-radius: 1rem;
            border: none;
            font-size: 18px; /* ê³ ì • í¬ê¸° */
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
            width: 100%;
            margin-top: 1.5rem;
            white-space: nowrap;
        }

        .primary-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .primary-button:active {
            transform: translateY(0);
        }

        .primary-button:disabled {
            background: linear-gradient(135deg, #cbd5e0, #a0aec0);
            color: #e2e8f0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .answer-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .answer-button {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 1.25rem 1.5rem;
            border-radius: 1rem;
            border: none;
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 16px rgba(72, 187, 120, 0.3);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
        }

        .answer-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .answer-button:hover::before {
            left: 100%;
        }

        .answer-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(72, 187, 120, 0.4);
        }

        .answer-button.selected {
            background: linear-gradient(135deg, #2f855a, #276749);
            transform: scale(1.02);
            box-shadow: 0 12px 24px rgba(47, 133, 90, 0.5);
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ - ì§ˆë¬¸ í˜ì´ì§€ìš© (ë” í° í¬ê¸°) */
        .footer-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
            padding-top: 1rem;
            gap: 0.8rem; /* ê°„ê²© ë” ëŠ˜ë¦¼ */
        }

        .nav-pill {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 1rem 1.4rem; /* íŒ¨ë”© ë” ëŠ˜ë¦¼ */
            border-radius: 2rem;
            border: none;
            font-size: 15px; /* í°íŠ¸ í¬ê¸° ë” ëŠ˜ë¦¼ */
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px; /* ìµœì†Œ ë„ˆë¹„ ë” ëŠ˜ë¦¼ */
            box-shadow: 0 6px 12px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            flex: 1; /* ë™ì¼í•œ í¬ê¸°ë¡œ ë¶„ë°° */
            max-width: 140px; /* ìµœëŒ€ ë„ˆë¹„ ë” ëŠ˜ë¦¼ */
        }

        .nav-pill::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .nav-pill:hover::before {
            left: 100%;
        }

        .nav-pill:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.4);
        }

        .nav-pill:disabled {
            background: linear-gradient(135deg, #cbd5e0, #a0aec0);
            color: #e2e8f0;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .nav-pill.secondary {
            background: linear-gradient(135deg, #e2e8f0, #cbd5e0);
            color: #4a5568;
        }

        .nav-pill.dev-button {
            background: linear-gradient(135deg, #6b7280, #9ca3af);
        }

        .center-buttons {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.8rem; /* ê°„ê²© ë” ëŠ˜ë¦¼ */
            flex: 1;
            max-width: 140px;
        }

        /* ë‹µë³€ í˜„í™© */
        .review-container {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            margin-bottom: 6rem;
        }

        .section {
            background: rgba(255,255,255,0.95);
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .section-title {
            font-size: 18px; /* ê³ ì • í¬ê¸° */
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 1.5rem;
            white-space: nowrap;
        }

        .question-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
            gap: 1rem;
        }

        .answered-badge, .unanswered-badge {
            border-radius: 1rem;
            padding: 0.75rem;
            text-align: center;
            cursor: pointer;
            border: 2px solid;
            transition: all 0.3s ease;
            font-weight: 600;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .answered-badge:hover, .unanswered-badge:hover {
            transform: scale(1.1);
        }

        .answered-badge {
            background: linear-gradient(135deg, #c6f6d5, #9ae6b4);
            border-color: #48bb78;
            color: #22543d;
        }

        .unanswered-badge {
            background: linear-gradient(135deg, #fed7d7, #feb2b2);
            border-color: #f56565;
            color: #742a2a;
        }

        .q-badge-num {
            font-size: 14px; /* ê³ ì • í¬ê¸° */
            font-weight: 700;
        }

        /* ğŸ†• ìƒˆë¡œìš´ ê²°ê³¼ í˜ì´ì§€ ìŠ¤íƒ€ì¼ - ì˜ì—­ë³„ ë¶„ë¦¬ */
        .area-section {
            margin-bottom: 3rem;
        }

        .area-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .area-title-box {
            background: rgba(255,255,255,0.15);
            border-radius: 0.5rem;
            padding: 0.75rem 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 0.5rem;
            display: inline-block;
            min-width: 300px;
            max-width: 90%;
        }

        .area-title {
            font-size: 24px; /* ê³ ì • í¬ê¸° */
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 0;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            white-space: nowrap;
        }

        .area-subtitle {
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            color: rgba(255,255,255,0.9);
            font-weight: 500;
            white-space: nowrap;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .type-card {
            background: rgba(255,255,255,0.95);
            border-radius: 1.5rem;
            padding: 1.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .type-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
        }

        .type-header {
            text-align: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e2e8f0;
        }

        .type-label {
            font-size: 18px; /* ê³ ì • í¬ê¸° */
            font-weight: 800;
            color: #667eea;
            margin-bottom: 0.5rem;
        }

        .type-name {
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            font-weight: 600;
            color: #4a5568;
        }

        .questions-section {
            margin-bottom: 1.5rem;
        }

        .question-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .question-item:last-child {
            border-bottom: none;
        }

        .question-num {
            font-size: 14px; /* ê³ ì • í¬ê¸° */
            font-weight: 600;
            color: #64748b;
        }

        .question-score {
            font-size: 14px; /* ê³ ì • í¬ê¸° */
            font-weight: 700;
            color: #2d3748;
            background: #f8fafc;
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
            min-width: 30px;
            text-align: center;
        }

        .score-section {
            text-align: center;
            padding-top: 1rem;
            border-top: 2px solid #e2e8f0;
        }

        .traffic-light {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .traffic-icon {
            font-size: 20px; /* ê³ ì • í¬ê¸° */
        }

        .traffic-text {
            font-size: 14px; /* ê³ ì • í¬ê¸° */
            font-weight: 700;
        }

        .total-score {
            font-size: 24px; /* ê³ ì • í¬ê¸° */
            font-weight: 800;
        }

        /* ì‹¤ì²œ ì „ëµ */
        .plan-card {
            background: rgba(255,255,255,0.95);
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 6rem;
        }

        .plan-input {
            width: 100%;
            min-height: 300px;
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            color: #2d3748;
            border: 2px solid #e2e8f0;
            border-radius: 1rem;
            padding: 1.5rem;
            resize: vertical;
            font-family: inherit;
            line-height: 1.7;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.8);
        }

        .plan-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .plan-input::placeholder {
            color: #a0aec0;
            font-weight: 500;
        }

        /* ì´ë©”ì¼ ì…ë ¥ ìŠ¤íƒ€ì¼ */
        .email-card {
            background: rgba(255,255,255,0.95);
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 6rem;
        }

        .email-input {
            width: 100%;
            padding: 1rem 1.5rem;
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            color: #2d3748;
            border: 2px solid #e2e8f0;
            border-radius: 1rem;
            font-family: inherit;
            line-height: 1.7;
            transition: all 0.3s ease;
            background: rgba(255,255,255,0.8);
            margin-bottom: 1.5rem;
        }

        .email-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .email-input::placeholder {
            color: #a0aec0;
            font-weight: 500;
        }

        /* ì´ë©”ì¼ ì„±ê³µ í™”ë©´ ìŠ¤íƒ€ì¼ */
        .success-card {
            background: rgba(255,255,255,0.95);
            padding: 3rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.2);
            text-align: center;
            margin-bottom: 6rem;
        }

        .success-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            display: block;
        }

        .success-title {
            font-size: 24px; /* ê³ ì • í¬ê¸° */
            font-weight: 800;
            color: #38a169;
            margin-bottom: 1rem;
        }

        .success-message {
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            color: #4a5568;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        /* í•˜ë‹¨ ë°” - ì›ë˜ í¬ê¸°ë¡œ ë³µì› */
        .footer-bar {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            right: 2rem;
            max-width: 1160px;
            margin: 0 auto;
        }

        .footer-bar .nav-pill {
            width: 100%;
            padding: 1rem 2rem; /* ì›ë˜ í¬ê¸°ë¡œ ë³µì› */
            font-size: 18px; /* ì›ë˜ í¬ê¸°ë¡œ ë³µì› */
            min-width: auto; /* ì›ë˜ëŒ€ë¡œ */
            max-width: none; /* ì›ë˜ëŒ€ë¡œ */
            flex: none; /* ì›ë˜ëŒ€ë¡œ */
        }

        /* í•´ì„ ê°€ì´ë“œ */
        .interpretation-guide {
            margin-top: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: rgba(255,255,255,0.9);
            padding: 2rem;
            border-radius: 1rem;
            backdrop-filter: blur(10px);
        }

        .interpretation-title {
            color: #2d3748;
            font-weight: 700;
            font-size: 18px; /* ê³ ì • í¬ê¸° */
        }

        .traffic-guide {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .traffic-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .traffic-item .traffic-icon {
            font-size: 18px; /* ê³ ì • í¬ê¸° */
        }

        .traffic-item .traffic-text {
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            color: #4a5568;
            font-weight: 500;
        }

        .interpretation-text {
            color: #4a5568;
            font-size: 16px; /* ê³ ì • í¬ê¸° */
            font-weight: 500;
        }

        .score-red {
            color: #e53e3e;
            font-weight: 800;
        }

        .score-green {
            color: #38a169;
            font-weight: 800;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ - ì§ˆë¬¸ í˜ì´ì§€ ë²„íŠ¼ ë” í¬ê²Œ */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .question-card {
                min-height: 150px;
            }
            
            /* ì§ˆë¬¸ í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ë” í¬ê²Œ */
            .footer-nav .nav-pill {
                font-size: 14px !important; /* 13px â†’ 14px */
                padding: 0.8rem 1rem !important; /* 0.7rem 0.9rem â†’ 0.8rem 1rem */
                min-width: 80px !important; /* 75px â†’ 80px */
                max-width: 110px !important; /* 105px â†’ 110px */
            }
            
            .footer-nav {
                gap: 0.5rem !important; /* 0.4rem â†’ 0.5rem */
            }
            
            .footer-nav .center-buttons {
                gap: 0.5rem !important; /* 0.4rem â†’ 0.5rem */
                max-width: 110px !important; /* 105px â†’ 110px */
            }
            
            .question-grid {
                grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
                gap: 0.75rem;
            }
            
            .answered-badge, .unanswered-badge {
                min-height: 45px;
                padding: 0.5rem;
            }

            .qr-section {
                padding: 1.5rem;
            }

            /* ëª¨ë°”ì¼ì—ì„œë„ ì œëª© í¬ê¸° ìœ ì§€ */
            .title {
                font-size: 24px !important;
            }
            
            .intro-title {
                font-size: 28px !important;
            }

            .title-box {
                min-width: 300px;
                padding: 0.5rem 1.5rem;
            }

            /* ê²°ê³¼ í˜ì´ì§€ íƒœë¸”ë¦¿ ìµœì í™” - 4x1 ìœ ì§€í•˜ë˜ í¬ê¸° ì¶•ì†Œ */
            .results-grid {
                grid-template-columns: repeat(4, 1fr) !important;
                gap: 0.5rem !important;
            }

            .type-card {
                padding: 0.75rem !important;
            }

            .type-label {
                font-size: 14px !important;
            }

            .type-name {
                font-size: 12px !important;
            }

            .question-item {
                padding: 0.25rem 0 !important;
            }

            .question-num {
                font-size: 12px !important;
            }

            .question-score {
                font-size: 12px !important;
                padding: 0.125rem 0.25rem !important;
                min-width: 25px !important;
            }

            .traffic-icon {
                font-size: 16px !important;
            }

            .traffic-text {
                font-size: 12px !important;
            }

            .total-score {
                font-size: 18px !important;
            }

            .area-title-box {
                min-width: 250px;
                padding: 0.5rem 1.5rem;
            }

            .area-title {
                font-size: 20px !important;
            }

            .traffic-guide {
                gap: 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0.75rem;
            }
            
            .card {
                padding: 1rem;
            }
            
            /* ë” ì‘ì€ í™”ë©´ì—ì„œ ì§ˆë¬¸ í˜ì´ì§€ ë²„íŠ¼ ë” í¬ê²Œ */
            .footer-nav .nav-pill {
                font-size: 13px !important; /* 12px â†’ 13px */
                padding: 0.7rem 0.8rem !important; /* 0.6rem 0.7rem â†’ 0.7rem 0.8rem */
                min-width: 70px !important; /* 65px â†’ 70px */
                max-width: 95px !important; /* 90px â†’ 95px */
            }
            
            .footer-nav {
                gap: 0.4rem !important; /* 0.3rem â†’ 0.4rem */
            }
            
            .footer-nav .center-buttons {
                gap: 0.4rem !important; /* 0.3rem â†’ 0.4rem */
                max-width: 95px !important; /* 90px â†’ 95px */
            }
            
            .question-grid {
                grid-template-columns: repeat(auto-fill, minmax(45px, 1fr));
                gap: 0.5rem;
            }
            
            .answered-badge, .unanswered-badge {
                min-height: 40px;
                padding: 0.375rem;
            }

            .qr-section {
                padding: 1rem;
            }

            /* ì‘ì€ í™”ë©´ì—ì„œë„ ì œëª© í¬ê¸° ìœ ì§€ */
            .title {
                font-size: 20px !important;
            }
            
            .intro-title {
                font-size: 24px !important;
            }

            .title-box {
                min-width: 250px;
                padding: 0.5rem 1rem;
            }

            /* ê²°ê³¼ í˜ì´ì§€ ëª¨ë°”ì¼ ìµœì í™” - 4x1 ìœ ì§€í•˜ë˜ ë” ì‘ê²Œ */
            .results-grid {
                grid-template-columns: repeat(4, 1fr) !important;
                gap: 0.25rem !important;
            }

            .type-card {
                padding: 0.5rem !important;
            }

            .type-header {
                margin-bottom: 0.75rem !important;
                padding-bottom: 0.5rem !important;
            }

            .type-label {
                font-size: 12px !important;
            }

            .type-name {
                font-size: 10px !important;
            }

            .questions-section {
                margin-bottom: 0.75rem !important;
            }

            .question-item {
                padding: 0.125rem 0 !important;
            }

            .question-num {
                font-size: 10px !important;
            }

            .question-score {
                font-size: 10px !important;
                padding: 0.125rem 0.25rem !important;
                min-width: 20px !important;
            }

            .score-section {
                padding-top: 0.5rem !important;
            }

            .traffic-light {
                margin-bottom: 0.25rem !important;
            }

            .traffic-icon {
                font-size: 14px !important;
            }

            .traffic-text {
                font-size: 10px !important;
            }

            .total-score {
                font-size: 16px !important;
            }

            .area-title-box {
                min-width: 200px;
                padding: 0.5rem 1rem;
            }

            .area-title {
                font-size: 18px !important;
            }

            .traffic-item .traffic-text {
                font-size: 14px !important;
            }
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            animation: fadeIn 0.6s ease-out;
        }

        /* ì¶œì²˜ ìŠ¤íƒ€ì¼ */
        .citation {
            text-align: center;
            margin-top: 2rem;
            padding: 1rem;
            color: rgba(255,255,255,0.7);
            font-size: 12px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div id="app"></div>
    </div>

    <!-- QRì½”ë“œ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <!-- EmailJS ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <script>
        // EmailJS ì´ˆê¸°í™” - ì‹¤ì œ Public Keyë¡œ ë³€ê²½ë¨
        emailjs.init("gQJMP6li6AStVjesO");

        // ì§ˆë¬¸ ë°ì´í„°
        const questions = [
            { id: 1, text: "ì ì ˆí•œ ìŒì‹ì„ ì ë‹¹ëŸ‰ ë¨¹ëŠ”ë‹¤.", type: "A" },
            { id: 2, text: "ì ì‹¬ì‹ì‚¬ ë•Œ ìˆ ì„ ë§ˆì‹œì§€ ì•ŠëŠ”ë‹¤.", type: "B" },
            { id: 3, text: "ì¼ì£¼ì¼ì— ì ì–´ë„ 3ë²ˆ ì •ë„ëŠ” ë•€ì´ ë‚  ì •ë„ë¡œ ìš´ë™ì„ í•œë‹¤.", type: "C" },
            { id: 4, text: "ì¹œêµ¬ë‚˜ ì¹œì²™ê³¼ ì •ê¸°ì  ëª¨ì„ì´ë‚˜ ë™ì°½ ëª¨ì„ì„ ê°–ëŠ”ë‹¤.", type: "D" },
            { id: 5, text: "ë‚˜ì˜ ì„±ìƒí™œì— ë§Œì¡±í•œë‹¤.", type: "E" },
            { id: 6, text: "ì ì–´ë„ í•œ ê°€ì§€ ì´ìƒì˜ ì—¬ê°€í™œë™ì´ë‚˜ ê·œì¹™ì ìœ¼ë¡œ ì¦ê¸°ëŠ” í¥ë¯¸ê±°ë¦¬ê°€ ìˆë‹¤.", type: "F" },
            { id: 7, text: "ì£¼ë§ì—ëŠ” ì¼í•˜ì§€ ì•Šê³  ì‰¬ê±°ë‚˜ ì—¬ê°€í™œë™ì„ í•œë‹¤.", type: "G" },
            { id: 8, text: "ê·œì¹™ì ìœ¼ë¡œ ê¸°ë„ë¥¼ í•˜ê±°ë‚˜ ëª…ìƒì„ í•œë‹¤.", type: "H" },
            { id: 9, text: "í•˜ë£¨ì— ì»¤í”¼, ë˜ëŠ” ì½œë¼ ë“±ì„ 5ì” ì´ìƒ ë§ˆì‹œì§€ ì•ŠëŠ”ë‹¤.", type: "A" },
            { id: 10, text: "ìŒë£Œìˆ˜ë¥¼ ìˆ  ë§ˆì‹œê¸°ë³´ë‹¤ ë” ì¢‹ì•„í•œë‹¤.", type: "B" },
            { id: 11, text: "ì¼ìƒìƒí™œ ê°€ìš´ë° ì ë‹¹í•œ ì‹ ì²´ì—ë„ˆì§€ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¼ì„ í•œë‹¤.", type: "C" },
            { id: 12, text: "ê·œì¹™ì ìœ¼ë¡œ ì• ì •ì„ ì£¼ê³ ë°›ëŠ”ë‹¤.", type: "D" },
            { id: 13, text: "ê·œì¹™ì ìœ¼ë¡œ ì„±ì  ë§Œì¡±ê°ì„ ì·¨í•œë‹¤.", type: "E" },
            { id: 14, text: "ë§¤ì¼ íœ´ì‹ì‹œê°„ì„ ê°–ëŠ”ë‹¤.", type: "F" },
            { id: 15, text: "í•  ìˆ˜ ìˆëŠ” ì¼(í˜„ì‹¤ì ì¸ ì¼)ë§Œ í•˜ë©° ê³¼ë„í•˜ê²Œ ì¼í•˜ì§€ ì•ŠëŠ”ë‹¤.", type: "G" },
            { id: 16, text: "ë‚˜ì˜ ë¬¸ì œë¥¼ ë‚´ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•œë‹¤.", type: "H" },
            { id: 17, text: "ë‚˜ì˜ í‚¤ì— ì•Œë§ì€ ì ì ˆí•œ ì²´ì¤‘ì„ ìœ ì§€í•œë‹¤.", type: "A" },
            { id: 18, text: "ë‚˜ í˜¼ìì„œëŠ” ìˆ ì„ ë§ˆì‹œì§€ ì•ŠëŠ”ë‹¤.", type: "B" },
            { id: 19, text: "ì—˜ë¦¬ë² ì´í„°ë‚˜ ìŠ¹ê°•ê¸°ë¥¼ ì´ìš©í•˜ê¸°ë³´ë‹¤ëŠ” ê³„ë‹¨ì„ ê±¸ì–´ ì˜¬ë¼ê°„ë‹¤.", type: "C" },
            { id: 20, text: "ë¶€ì •ì  ê°ì •ì„ ìŒ“ì•„ë‘ê¸°ë³´ë‹¤ëŠ” ì˜ í‘œí˜„í•œë‹¤.", type: "D" },
            { id: 21, text: "ì„±ì ìœ¼ë¡œ ë¬´ë ¥í•˜ê±°ë‚˜ ëƒ‰ë‹´í•˜ì§€ ì•Šë‹¤.", type: "E" },
            { id: 22, text: "ì ì–´ë„ ì¼ì£¼ì¼ì— ë‚˜í˜ ì •ë„ëŠ” 7~8ì‹œê°„ ì ì„ ì”ë‹¤.", type: "F" },
            { id: 23, text: "ê²°ì½” ì¼(ì‚¬ì—…)ì´ ë‚˜ì˜ ìƒí™œì„ ì§€ë°°í•˜ë„ë¡ ë‘ì§€ ì•ŠëŠ”ë‹¤.", type: "G" },
            { id: 24, text: "ë‚˜ ìì‹ ì„ ë¯¿ëŠ”ë‹¤.", type: "H" },
            { id: 25, text: "ìŒì‹ì— ì†Œê¸ˆì„ ê³¼í•˜ê²Œ ë„£ì§€ ì•ŠëŠ”ë‹¤.", type: "A" },
            { id: 26, text: "í‡´ê·¼ í›„ ì§‘ì—ì„œ ìˆ ì„ ì˜ ë§ˆì‹œì§€ ì•ŠëŠ”ë‹¤.", type: "B" },
            { id: 27, text: "ê·œì¹™ì ì¸ ìš´ë™ í”„ë¡œê·¸ë¨ì„ ì‹¤ì²œí•œë‹¤.", type: "C" },
            { id: 28, text: "ë§¤ìš° ì ˆì¹œí•œ ì¹œêµ¬ê°€ ìˆì–´ ê·¸ë“¤ê³¼ ì€ë°€í•œ ë¬¸ì œë¥¼ ë…¼ì˜í•  ìˆ˜ ìˆë‹¤.", type: "D" },
            { id: 29, text: "ì‚¬ë‘ì´ ì¶©ë§Œí•œ ì„±ê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤.", type: "E" },
            { id: 30, text: "ì¼ì£¼ì¼ì— ì ì–´ë„ í•œë²ˆì€ ì¬ë¯¸ìˆëŠ” ì¼ì„ í•œë‹¤.", type: "F" },
            { id: 31, text: "ì‚¬íšŒìƒí™œì—ì„œ ë‚˜ ìì‹ ì˜ ì‚¬ì—…ì— ëŒ€í•´ ë§í•˜ëŠ” ê²ƒì„ í”¼í•œë‹¤.", type: "G" },
            { id: 32, text: "ë‚´ ë§ˆìŒì´ í‰ì•ˆí•˜ë‹¤ëŠ” ëŠë‚Œì„ ê°–ëŠ”ë‹¤.", type: "H" },
            { id: 33, text: "ë§¤ì¼ ê·œì¹™ì ìœ¼ë¡œ ì‹ì‚¬ë¥¼ í•˜ê³  êµ°ê²ƒì§ˆì€ í•˜ì§€ ì•ŠëŠ”ë‹¤.", type: "A" },
            { id: 34, text: "ì ë‹¹í•˜ê²Œ ìˆ ì„ ë§ˆì‹œê±°ë‚˜(í•˜ë£¨ 2ì” ë¯¸ë§Œ), ì „í˜€ ë§ˆì‹œì§€ ì•ŠëŠ”ë‹¤.", type: "B" },
            { id: 35, text: "ë§¤ì£¼ í•œê°€ì§€ ì´ìƒì˜ ìš´ë™ì„ í•œë‹¤.", type: "C" },
            { id: 36, text: "ì§ì¥ì—ì„œ ë‚˜ë¥¼ ì •ì„œì ìœ¼ë¡œ ì§€ì§€í•´ ì£¼ëŠ” ë™ë£Œê°€ ìˆë‹¤.", type: "D" },
            { id: 37, text: "ì•ˆì •ëœ ì„±ê´€ê³„ë¥¼ ìœ ì§€í•˜ê¸¸ ì¢‹ì•„í•œë‹¤.", type: "E" },
            { id: 38, text: "ë‚˜ ìŠ¤ìŠ¤ë¡œ ì¦ê±°ìš´ ì¼ê±°ë¦¬ë¥¼ ë§ˆë ¨í•  ìˆ˜ ìˆë‹¤.", type: "F" },
            { id: 39, text: "ì•¼ê°„ì—ëŠ” ì¼í•˜ì§€ ì•ŠëŠ”ë‹¤.", type: "G" },
            { id: 40, text: "ì–´ë–¤ ì¼ì´ë‚˜ ì–´ë–¤ ë‹¨ì²´ì— ëŒ€í•´ ë†’ì€ ì†Œì†ê°ì„ ê°–ëŠ”ë‹¤.", type: "H" },
            { id: 41, text: "ê·œì¹™ì ìœ¼ë¡œ ë¬¼ì„ ë§ˆì‹ ë‹¤.", type: "A" },
            { id: 42, text: "í•˜ë£¨ 3ê°œí”¼ ì´í•˜ì˜ ë‹´ë°°ë¥¼ í”¼ìš°ê±°ë‚˜ ì•„ì˜ˆ í”¼ìš°ì§€ ì•ŠëŠ”ë‹¤.", type: "B" },
            { id: 43, text: "ë§¤ì¼ ì‚°ì±…í•˜ê±°ë‚˜ ê¸¸ì„ ê±·ëŠ”ë‹¤.", type: "C" },
            { id: 44, text: "ì¹œêµ¬ë¡œë¶€í„° ë„ì›€ì„ êµ¬í•˜ê±°ë‚˜ í•„ìš”í•˜ë©´ ì „ë¬¸ì  ì¶©ê³ ë¥¼ ë°›ëŠ”ë‹¤.", type: "D" },
            { id: 45, text: "ê±°ì˜ ì„±ì  ì¢Œì ˆê°ì„ ëŠë¼ì§€ ì•ŠëŠ”ë‹¤.", type: "E" },
            { id: 46, text: "ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šê³ ë„ ì‹œê°„ì„ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.", type: "F" },
            { id: 47, text: "ê°€ì •ìƒí™œê³¼ ì§ì¥ìƒí™œì´ ë‚˜ì—ê²ŒëŠ” ë˜‘ê°™ì´ ì¤‘ìš”í•˜ë‹¤.", type: "G" },
            { id: 48, text: "ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì„ ê·¹ë³µí•˜ëŠ” ê²ƒì„ ë°°ìš´ ì ì´ ìˆë‹¤.", type: "H" }
        ];

        // ìœ í˜•ë³„ ì§ˆë¬¸ ë²ˆí˜¸
        const typeInfo = {
            A: { name: "ì‹ìƒí™œ", questions: [1, 9, 17, 25, 33, 41] },
            B: { name: "ê¸ˆì£¼/ê¸ˆì—°", questions: [2, 10, 18, 26, 34, 42] },
            C: { name: "ìš´ë™ ì‹¤ì²œ", questions: [3, 11, 19, 27, 35, 43] },
            D: { name: "ì •ì„œì  ì•ˆì •", questions: [4, 12, 20, 28, 36, 44] },
            E: { name: "ì„±ìƒí™œ", questions: [5, 13, 21, 29, 37, 45] },
            F: { name: "ì—¬ê°€í™œë™", questions: [6, 14, 22, 30, 38, 46] },
            G: { name: "ì¼ìƒí™œê· í˜•", questions: [7, 15, 23, 31, 39, 47] },
            H: { name: "ìê¸°ì´í•´ìˆ˜ìš©", questions: [8, 16, 24, 32, 40, 48] }
        };

        // ì•± ìƒíƒœ
        let state = {
            screen: 'intro',
            currentQuestion: 0,
            answers: {},
            pendingChoice: null,
            planText: '',
            questionFilter: 'all',
            unansweredQuestions: [],
            sessionAnsweredCount: 0,
            userEmail: '',
            senderName: '' // ë³´ë‚´ëŠ” ì‚¬ëŒ ì´ë¦„
        };

        // QRì½”ë“œ ìƒì„±
        function generateQRCode() {
            const currentURL = window.location.href;
            const qrContainer = document.getElementById('qr-code');
            
            if (qrContainer && typeof QRCode !== 'undefined') {
                QRCode.toCanvas(qrContainer, currentURL, {
                    width: 200,
                    height: 200,
                    colorDark: '#2d3748',
                    colorLight: '#ffffff',
                    margin: 2,
                    errorCorrectionLevel: 'M'
                }, function (error) {
                    if (error) {
                        console.error('QRì½”ë“œ ìƒì„± ì˜¤ë¥˜:', error);
                        qrContainer.innerHTML = '<p style="color: #e53e3e; font-size: 14px;">QRì½”ë“œ ìƒì„± ì‹¤íŒ¨</p>';
                    }
                });
            }
        }

        // ì ìˆ˜ ê³„ì‚°
        function calculateScores() {
            const scores = {};
            Object.keys(typeInfo).forEach(type => {
                const qs = typeInfo[type].questions;
                scores[type] = qs.reduce((sum, qNum) => sum + (state.answers[qNum] || 0), 0);
            });
            return scores;
        }

        // ì ìˆ˜ ìƒ‰ìƒ
        function getScoreColor(score) {
            if (score <= 9) return '#e53e3e';
            if (score >= 15) return '#38a169';
            return '#2d3748';
        }

        // ğŸ”§ ì™„ì „íˆ ìˆ˜ì •ëœ ì´ë©”ì¼ ì „ì†¡ í•¨ìˆ˜
        function sendEmail() {
            console.log('=== ì´ë©”ì¼ ì „ì†¡ ì‹œì‘ ===');
            
            const email = document.getElementById('email-input').value.trim();
            const senderName = document.getElementById('sender-name').value.trim();
            
            console.log('ì…ë ¥ëœ ì´ë©”ì¼:', email);
            console.log('ì…ë ¥ëœ ì´ë¦„:', senderName);
            
            if (!email) {
                alert('ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                console.log('âŒ ì´ë©”ì¼ ì£¼ì†Œ ëˆ„ë½');
                return;
            }
            
            if (!senderName) {
                alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                console.log('âŒ ì´ë¦„ ëˆ„ë½');
                return;
            }

            // ì´ë©”ì¼ í˜•ì‹ ê²€ì¦
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('ì˜¬ë°”ë¥¸ ì´ë©”ì¼ í˜•ì‹ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                console.log('âŒ ì´ë©”ì¼ í˜•ì‹ ì˜¤ë¥˜');
                return;
            }

            console.log('âœ… ì…ë ¥ ê²€ì¦ í†µê³¼');

            // ë¡œë”© ì‹œì‘ - ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬
            const button = document.getElementById('send-button');
            if (button) {
                button.disabled = true;
                button.textContent = 'ì „ì†¡ ì¤‘...';
            }

            console.log('âœ… ë¡œë”© ìƒíƒœ ì‹œì‘');

            // ê²€ì‚¬ ê²°ê³¼ ìƒì„±
            const scores = calculateScores();
            const resultsText = generateResultsText(scores);
            
            console.log('ìƒì„±ëœ ì ìˆ˜:', scores);
            console.log('ìƒì„±ëœ ê²°ê³¼ í…ìŠ¤íŠ¸:', resultsText);
            
            // EmailJS í…œí”Œë¦¿ íŒŒë¼ë¯¸í„°
            const templateParams = {
                to_email: email,
                sender_name: senderName, // ë³´ë‚´ëŠ” ì‚¬ëŒ ì´ë¦„
                results: resultsText,
                plan: state.planText || 'ì‘ì„±í•˜ì§€ ì•ŠìŒ',
                date: new Date().toLocaleDateString('ko-KR')
            };

            console.log('í…œí”Œë¦¿ íŒŒë¼ë¯¸í„°:', templateParams);
            console.log('EmailJS ì„¤ì •:');
            console.log('- Public Key: gQJMP6li6AStVjesO');
            console.log('- Service ID: service_2tdscta');
            console.log('- Template ID: template_z956dv7');

            // ì´ë©”ì¼ ì „ì†¡ - ì‹¤ì œ Service IDì™€ Template IDë¡œ ë³€ê²½ë¨
            emailjs.send('service_2tdscta', 'template_z956dv7', templateParams)
                .then(function(response) {
                    console.log('âœ… ì´ë©”ì¼ ì „ì†¡ ì„±ê³µ!', response.status, response.text);
                    state.screen = 'email-success';
                    render();
                }, function(error) {
                    console.error('âŒ ì´ë©”ì¼ ì „ì†¡ ì‹¤íŒ¨:', error);
                    console.error('ì˜¤ë¥˜ ìƒì„¸:', JSON.stringify(error, null, 2));
                    alert('ì´ë©”ì¼ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                    // ë¡œë”© ì¢…ë£Œ - ê°„ë‹¨í•˜ê²Œ ì²˜ë¦¬
                    if (button) {
                        button.disabled = false;
                        button.textContent = 'ì´ë©”ì¼ ì „ì†¡í•˜ê¸°';
                    }
                });
        }

        // ê²°ê³¼ í…ìŠ¤íŠ¸ ìƒì„±
        function generateResultsText(scores) {
            let text = '=== ìŠ¤íŠ¸ë ˆìŠ¤ ì·¨ì•½ì„± ê²€ì‚¬ ê²°ê³¼ ===\n\n';
            
            Object.keys(typeInfo).forEach(type => {
                const score = scores[type];
                const typeName = typeInfo[type].name;
                let interpretation = '';
                
                if (score <= 9) {
                    interpretation = 'ì£¼ì˜ (ğŸ”´)';
                } else if (score >= 15) {
                    interpretation = 'ì–‘í˜¸ (ğŸŸ¢)';
                } else {
                    interpretation = 'ë³´í†µ (ğŸŸ¡)';
                }
                
                text += `${type}ìœ í˜• (${typeName}): ${score}ì  - ${interpretation}\n`;
            });
            
            text += '\n=== í•´ì„ ê°€ì´ë“œ ===\n';
            text += 'ğŸŸ¢ 15ì  ì´ìƒ: ì–‘í˜¸ - ì˜ ê²¬ë””ê³  ìˆë‹¤ëŠ” ì¦ê±°\n';
            text += 'ğŸŸ¡ 10-14ì : ë³´í†µ - ì¼ë°˜ì ì¸ ìˆ˜ì¤€\n';
            text += 'ğŸ”´ 9ì  ì´í•˜: ì£¼ì˜ - ìŠ¤íŠ¸ë ˆìŠ¤ì— ëŒ€í•œ ë°˜ì‘ì´ ë¶€ì •ì  ê²½í–¥\n';
            
            return text;
        }

        // í…ŒìŠ¤íŠ¸ ë¦¬ì…‹
        function resetTest() {
            state = {
                screen: 'intro',
                currentQuestion: 0,
                answers: {},
                pendingChoice: null,
                planText: '',
                questionFilter: 'all',
                unansweredQuestions: [],
                sessionAnsweredCount: 0,
                userEmail: '',
                senderName: ''
            };
        }

        // ë‹µë³€ ì„ íƒ
        function selectAnswer(score) {
            state.pendingChoice = score;
            render();
        }

        // í•„í„°ë§ëœ ì§ˆë¬¸ë“¤ ë°˜í™˜
        function getFilteredQuestions() {
            if (state.questionFilter === 'answered') {
                return questions.filter(q => state.answers[q.id] !== undefined);
            } else if (state.questionFilter === 'unanswered') {
                return state.unansweredQuestions.map(qNum => questions.find(q => q.id === qNum)).filter(Boolean);
            }
            return questions;
        }

        // í˜„ì¬ ì§ˆë¬¸ ì •ë³´
        function getCurrentQuestionInfo() {
            const filteredQuestions = getFilteredQuestions();
            const currentIndex = filteredQuestions.findIndex(q => q.id === questions[state.currentQuestion].id);
            
            let current = currentIndex + 1;
            let total = filteredQuestions.length;
            
            if (state.questionFilter === 'unanswered') {
                current = state.sessionAnsweredCount + 1;
                total = state.unansweredQuestions.length;
            }
            
            return {
                current: current,
                total: total,
                isFirst: currentIndex === 0,
                isLast: currentIndex === filteredQuestions.length - 1
            };
        }

        // ë‹¤ìŒìœ¼ë¡œ ì§„í–‰
        function confirmAndNext() {
            const qNum = state.currentQuestion + 1;
            if (state.pendingChoice !== null) {
                state.answers[qNum] = state.pendingChoice;
                
                if (state.questionFilter === 'unanswered') {
                    state.sessionAnsweredCount++;
                }
            }
            state.pendingChoice = null;
            
            const filteredQuestions = getFilteredQuestions();
            const currentIndex = filteredQuestions.findIndex(q => q.id === questions[state.currentQuestion].id);
            
            if (currentIndex < filteredQuestions.length - 1) {
                const nextQuestion = filteredQuestions[currentIndex + 1];
                const nextIndex = questions.findIndex(q => q.id === nextQuestion.id);
                state.currentQuestion = nextIndex;
            } else {
                state.screen = 'review';
            }
            render();
        }

        // ì´ì „ ì§ˆë¬¸
        function goToPrevious() {
            const filteredQuestions = getFilteredQuestions();
            const currentIndex = filteredQuestions.findIndex(q => q.id === questions[state.currentQuestion].id);
            
            if (currentIndex > 0) {
                const prevQuestion = filteredQuestions[currentIndex - 1];
                const prevIndex = questions.findIndex(q => q.id === prevQuestion.id);
                state.currentQuestion = prevIndex;
                state.pendingChoice = state.answers[prevQuestion.id] ?? null;
            }
            render();
        }

        // ë‹¤ìŒ ì§ˆë¬¸
        function goToNext() {
            const filteredQuestions = getFilteredQuestions();
            const currentIndex = filteredQuestions.findIndex(q => q.id === questions[state.currentQuestion].id);
            
            if (currentIndex < filteredQuestions.length - 1) {
                const nextQuestion = filteredQuestions[currentIndex + 1];
                const nextIndex = questions.findIndex(q => q.id === nextQuestion.id);
                state.currentQuestion = nextIndex;
                state.pendingChoice = state.answers[nextQuestion.id] ?? null;
            }
            render();
        }

        // íŠ¹ì • ì§ˆë¬¸ìœ¼ë¡œ ì´ë™
        function goToQuestion(index) {
            state.currentQuestion = index;
            state.pendingChoice = state.answers[index + 1] ?? null;
            state.screen = 'question';
            
            if (state.questionFilter === 'unanswered') {
                state.unansweredQuestions = getUnansweredQuestions();
                state.sessionAnsweredCount = 0;
            }
            
            render();
        }

        // ë‹µë³€ ì™„ë£Œëœ ì§ˆë¬¸ë“¤
        function getAnsweredQuestions() {
            return Object.keys(state.answers).map(Number).sort((a,b) => a-b);
        }

        // ë¯¸ë‹µë³€ ì§ˆë¬¸ë“¤
        function getUnansweredQuestions() {
            const answered = new Set(getAnsweredQuestions());
            return Array.from({length:48},(_,i)=>i+1).filter(n=>!answered.has(n));
        }

        // í™”ë©´ ë Œë”ë§
        function render() {
            const app = document.getElementById('app');
            
            if (state.screen === 'intro') {
                app.innerHTML = `
                    <div class="container">
                        <div class="intro-card card">
                            <h1 class="intro-title">ìŠ¤íŠ¸ë ˆìŠ¤ ì·¨ì•½ì„± ê²€ì‚¬</h1>
                            <p class="intro-subtitle">ì´ 48ë¬¸í•­ | ê°€ì¥ ê°€ê¹Œìš´ ë‹µì„ ì„ íƒí•˜ì„¸ìš”</p>
                            <button class="primary-button" onclick="state.screen='question'; render();">ì‹œì‘í•˜ê¸°</button>
                        </div>

                        <div class="qr-section">
                            <h2 class="qr-title">ğŸ“± QRì½”ë“œë¡œ ëª¨ë°”ì¼ì—ì„œ ì ‘ì†í•˜ê¸°</h2>
                            <p class="qr-description">
                                ì•„ë˜ QRì½”ë“œë¥¼ ìŠ¤ìº”í•˜ë©´ ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œë„ ê°™ì€ ê²€ì‚¬ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </p>
                            
                            <div class="qr-container">
                                <canvas id="qr-code" class="qr-code"></canvas>
                            </div>

                            <div class="qr-instructions">
                                <h4>ğŸ“‹ ì‚¬ìš© ë°©ë²•</h4>
                                <ol>
                                    <li>ìŠ¤ë§ˆíŠ¸í°ì˜ ì¹´ë©”ë¼ ì•± ë˜ëŠ” QRì½”ë“œ ìŠ¤ìº” ì•±ì„ ì‹¤í–‰í•˜ì„¸ìš”</li>
                                    <li>ìœ„ì˜ QRì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì„¸ìš”</li>
                                    <li>ìë™ìœ¼ë¡œ ì´ ê²€ì‚¬ í˜ì´ì§€ê°€ ì—´ë¦½ë‹ˆë‹¤</li>
                                    <li>ëª¨ë°”ì¼ì—ì„œë„ í¸ë¦¬í•˜ê²Œ ê²€ì‚¬ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                `;
                
                setTimeout(generateQRCode, 100);
            }
            
            else if (state.screen === 'question') {
                const qNum = state.currentQuestion + 1;
                const saved = state.answers[qNum] ?? null;
                const selected = state.pendingChoice ?? saved;
                const questionInfo = getCurrentQuestionInfo();

                app.innerHTML = `
                    <div class="container">
                        <div class="header">
                            <div class="title-box">
                                <h1 class="title">ìŠ¤íŠ¸ë ˆìŠ¤ ì·¨ì•½ì„± ê²€ì‚¬</h1>
                            </div>
                        </div>
                        <div class="progress-container">
                            <div class="progress">
                                ${questionInfo.current} / ${questionInfo.total}
                                ${state.questionFilter !== 'all' ? `<span class="filter-text"> (${state.questionFilter === 'answered' ? 'ë‹µë³€ì™„ë£Œ' : 'ë¯¸ë‹µë³€'})</span>` : ''}
                            </div>
                        </div>

                        <div class="question-card card no-animation">
                            <div class="q-number">ì§ˆë¬¸ ${qNum}</div>
                            <div class="q-text">${questions[state.currentQuestion].text}</div>
                        </div>

                        <div class="answer-container">
                            <button class="answer-button ${selected === 3 ? 'selected' : ''}" onclick="selectAnswer(3)">
                                ì–¸ì œë‚˜ ê·¸ë ‡ë‹¤ (3ì )
                            </button>
                            <button class="answer-button ${selected === 1 ? 'selected' : ''}" onclick="selectAnswer(1)">
                                ê°€ë” ê·¸ë ‡ë‹¤ (1ì )
                            </button>
                            <button class="answer-button ${selected === 0 ? 'selected' : ''}" onclick="selectAnswer(0)">
                                ì „í˜€ ì•„ë‹ˆë‹¤ (0ì )
                            </button>
                        </div>

                        <div class="footer-nav">
                            <button class="nav-pill" ${questionInfo.isFirst ? 'disabled' : ''} onclick="goToPrevious()">
                                â† ì´ì „
                            </button>

                            <div class="center-buttons">
                                ${state.currentQuestion === 0 && state.questionFilter === 'all' ? `
                                    <button class="nav-pill dev-button" onclick="state.screen='results'; render();">
                                        ê²°ê³¼ ë°”ë¡œ ë³´ê¸°(ê°œë°œìš©)
                                    </button>
                                ` : ''}
                                <button class="nav-pill secondary" onclick="state.screen='review'; render();">
                                    ë‹µë³€ í˜„í™©
                                </button>
                            </div>

                            <button class="nav-pill" onclick="confirmAndNext()">
                                ë‹¤ìŒ â†’
                            </button>
                        </div>
                    </div>
                `;
            }
            
            else if (state.screen === 'review') {
                const answered = getAnsweredQuestions();
                const unanswered = getUnansweredQuestions();

                app.innerHTML = `
                    <div class="container">
                        <div class="header">
                            <div class="title-box">
                                <h1 class="title">ë‹µë³€ í˜„í™© í™•ì¸</h1>
                                <div class="subtitle">ì´ ${answered.length}ê°œ ë‹µë³€ ì™„ë£Œ</div>
                            </div>
                        </div>

                        <div class="review-container">
                            <div class="section">
                                <div class="section-title">âœ… ë‹µë³€ ì™„ë£Œ (${answered.length})</div>
                                <div class="question-grid">
                                    ${answered.map(q => `
                                        <div class="answered-badge" onclick="state.questionFilter='answered'; goToQuestion(${q-1});">
                                            <div class="q-badge-num">${q}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>

                            ${unanswered.length > 0 ? `
                                <div class="section">
                                    <div class="section-title">âŒ ë¯¸ë‹µë³€ (${unanswered.length})</div>
                                    <div class="question-grid">
                                        ${unanswered.map(q => `
                                            <div class="unanswered-badge" onclick="state.questionFilter='unanswered'; goToQuestion(${q-1});">
                                                <div class="q-badge-num">${q}</div>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>

                        <div class="footer-bar">
                            ${unanswered.length > 0 ? `
                                <button class="nav-pill" onclick="state.questionFilter='unanswered'; state.screen='question'; state.unansweredQuestions=${JSON.stringify(unanswered)}; state.sessionAnsweredCount=0; state.currentQuestion=${unanswered[0]-1}; render();">
                                    ë¯¸ë‹µë³€ ê³„ì†í•˜ê¸°
                                </button>
                            ` : `
                                <button class="nav-pill" onclick="state.screen='results'; render();">
                                    ê²°ê³¼ ë³´ê¸°
                                </button>
                            `}
                        </div>
                    </div>
                `;
            }
            
            else if (state.screen === 'results') {
                const scores = calculateScores();
                
                // ì‹ ì²´ ì˜ì—­ê³¼ ì •ì‹  ì˜ì—­ ë¶„ë¦¬
                const physicalTypes = [
                    { key: 'A', label: 'ì‹ìƒí™œ' },
                    { key: 'B', label: 'ê¸ˆì£¼/ê¸ˆì—°' },
                    { key: 'C', label: 'ìš´ë™ ì‹¤ì²œ' },
                    { key: 'E', label: 'ì„±ìƒí™œ' }
                ];
                
                const mentalTypes = [
                    { key: 'D', label: 'ì •ì„œì  ì•ˆì •' },
                    { key: 'F', label: 'ì—¬ê°€í™œë™' },
                    { key: 'G', label: 'ì¼ìƒí™œê· í˜•' },
                    { key: 'H', label: 'ìê¸°ì´í•´ìˆ˜ìš©' }
                ];
                
                const getCellScore = (qNum) => (state.answers[qNum] ?? '');
                
                // ì‹ í˜¸ë“± ìƒ‰ìƒ ë° ì•„ì´ì½˜
                function getTrafficLight(score) {
                    if (score <= 9) {
                        return { color: '#ef4444', icon: 'ğŸ”´', text: 'ì£¼ì˜' };
                    } else if (score >= 15) {
                        return { color: '#10b981', icon: 'ğŸŸ¢', text: 'ì–‘í˜¸' };
                    } else {
                        return { color: '#f59e0b', icon: 'ğŸŸ¡', text: 'ë³´í†µ' };
                    }
                }

                app.innerHTML = `
                    <div class="container">
                        <div class="header">
                            <div class="title-box">
                                <h1 class="title">ì·¨ì•½ì„± í”„ë¡œíŒŒì¼</h1>
                            </div>
                        </div>

                        <!-- ì‹ ì²´ ì˜ì—­ -->
                        <div class="area-section">
                            <div class="area-header">
                                <div class="area-title-box">
                                    <h2 class="area-title">ğŸƒâ€â™‚ï¸ ì‹ ì²´ ì˜ì—­</h2>
                                </div>
                                <div class="area-subtitle">ì‹ ì²´ì  ê±´ê°•ê³¼ ê´€ë ¨ëœ ì˜ì—­</div>
                            </div>
                            
                            <div class="results-grid">
                                ${physicalTypes.map(type => {
                                    const score = scores[type.key];
                                    const trafficLight = getTrafficLight(score);
                                    return `
                                        <div class="type-card">
                                            <div class="type-header">
                                                <div class="type-label">${type.key}ìœ í˜•</div>
                                                <div class="type-name">${type.label}</div>
                                            </div>
                                            
                                            <div class="questions-section">
                                                ${typeInfo[type.key].questions.map(qNum => `
                                                    <div class="question-item">
                                                        <span class="question-num">${qNum}</span>
                                                        <span class="question-score">${getCellScore(qNum)}</span>
                                                    </div>
                                                `).join('')}
                                            </div>
                                            
                                            <div class="score-section">
                                                <div class="traffic-light" style="color: ${trafficLight.color}">
                                                    <span class="traffic-icon">${trafficLight.icon}</span>
                                                    <span class="traffic-text">${trafficLight.text}</span>
                                                </div>
                                                <div class="total-score" style="color: ${trafficLight.color}">
                                                    ${score}ì 
                                                </div>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>

                        <!-- ì •ì‹  ì˜ì—­ -->
                        <div class="area-section">
                            <div class="area-header">
                                <div class="area-title-box">
                                    <h2 class="area-title">ğŸ§  ì •ì‹  ì˜ì—­</h2>
                                </div>
                                <div class="area-subtitle">ì •ì‹ ì  ê±´ê°•ê³¼ ê´€ë ¨ëœ ì˜ì—­</div>
                            </div>
                            
                            <div class="results-grid">
                                ${mentalTypes.map(type => {
                                    const score = scores[type.key];
                                    const trafficLight = getTrafficLight(score);
                                    return `
                                        <div class="type-card">
                                            <div class="type-header">
                                                <div class="type-label">${type.key}ìœ í˜•</div>
                                                <div class="type-name">${type.label}</div>
                                            </div>
                                            
                                            <div class="questions-section">
                                                ${typeInfo[type.key].questions.map(qNum => `
                                                    <div class="question-item">
                                                        <span class="question-num">${qNum}</span>
                                                        <span class="question-score">${getCellScore(qNum)}</span>
                                                    </div>
                                                `).join('')}
                                            </div>
                                            
                                            <div class="score-section">
                                                <div class="traffic-light" style="color: ${trafficLight.color}">
                                                    <span class="traffic-icon">${trafficLight.icon}</span>
                                                    <span class="traffic-text">${trafficLight.text}</span>
                                                </div>
                                                <div class="total-score" style="color: ${trafficLight.color}">
                                                    ${score}ì 
                                                </div>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>

                        <div class="interpretation-guide">
                            <div class="interpretation-title">í•´ì„ ê°€ì´ë“œ</div>
                            <div class="traffic-guide">
                                <div class="traffic-item">
                                    <span class="traffic-icon">ğŸŸ¢</span>
                                    <span class="traffic-text">15ì  ì´ìƒ: ì–‘í˜¸ - ì˜ ê²¬ë””ê³  ìˆë‹¤ëŠ” ì¦ê±°</span>
                                </div>
                                <div class="traffic-item">
                                    <span class="traffic-icon">ğŸŸ¡</span>
                                    <span class="traffic-text">10-14ì : ë³´í†µ - ì¼ë°˜ì ì¸ ìˆ˜ì¤€</span>
                                </div>
                                <div class="traffic-item">
                                    <span class="traffic-icon">ğŸ”´</span>
                                    <span class="traffic-text">9ì  ì´í•˜: ì£¼ì˜ - ìŠ¤íŠ¸ë ˆìŠ¤ì— ëŒ€í•œ ë°˜ì‘ì´ ë¶€ì •ì  ê²½í–¥</span>
                                </div>
                            </div>
                        </div>

                        <div class="citation">
                            * ì¶œì²˜ : James Cranwell Ward (1990)
                        </div>

                        <div style="height: 100px;"></div>
                    </div>

                    <div class="footer-bar">
                        <button class="nav-pill" onclick="state.screen='plan'; render();">
                            ë‹¤ìŒ
                        </button>
                    </div>
                `;
            }
            
            else if (state.screen === 'plan') {
                app.innerHTML = `
                    <div class="container">
                        <div class="header" style="margin-bottom: 2rem;">
                            <div class="title-box">
                                <h1 class="title">ë‚˜ì˜ ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ì‹¤ì²œ ì „ëµ</h1>
                                <div class="subtitle">ììœ ë¡­ê²Œ ê³„íšì„ ì ì–´ë³´ì„¸ìš”</div>
                            </div>
                        </div>

                        <div class="plan-card">
                            <textarea 
                                class="plan-input" 
                                placeholder="ì˜ˆ: ë§¤ì£¼ 3íšŒ ìš´ë™, ì¹´í˜ì¸ ì¤„ì´ê¸°, ì£¼ë§ íœ´ì‹ ì‹œê°„ í™•ë³´ ë“±"
                                oninput="state.planText = this.value"
                            >${state.planText}</textarea>
                        </div>
                    </div>

                    <div class="footer-bar">
                        <button class="nav-pill" onclick="state.screen='email'; render();">
                            ì™„ë£Œí•˜ê³  ê²°ê³¼ ì „ì†¡í•˜ê¸°
                        </button>
                    </div>
                `;
            }
            
            // ğŸ†• ì´ë©”ì¼ ì…ë ¥ í™”ë©´
            else if (state.screen === 'email') {
                app.innerHTML = `
                    <div class="container">
                        <div class="header" style="margin-bottom: 2rem;">
                            <div class="title-box">
                                <h1 class="title">ğŸ“§ ê²€ì‚¬ ê²°ê³¼ ì „ì†¡</h1>
                                <div class="subtitle">ì´ë¦„ê³¼ ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                            </div>
                        </div>

                        <div class="email-card">
                            <input 
                                type="text" 
                                id="sender-name"
                                class="email-input" 
                                placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”"
                                value="${state.senderName}"
                                oninput="state.senderName = this.value"
                                style="margin-bottom: 1rem;"
                            />
                            
                            <input 
                                type="email" 
                                id="email-input"
                                class="email-input" 
                                placeholder="ë°›ëŠ” ì‚¬ëŒ ì´ë©”ì¼ ì£¼ì†Œ"
                                value="${state.userEmail}"
                                oninput="state.userEmail = this.value"
                            />
                            
                            <button 
                                id="send-button"
                                class="primary-button" 
                                onclick="sendEmail()"
                            >
                                ì´ë©”ì¼ ì „ì†¡í•˜ê¸°
                            </button>
                        </div>
                    </div>

                    <div class="footer-bar">
                        <button class="nav-pill" onclick="state.screen='intro'; resetTest(); render();">
                            ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
                        </button>
                    </div>
                `;
            }
            
            // ğŸ†• ì´ë©”ì¼ ì „ì†¡ ì„±ê³µ í™”ë©´
            else if (state.screen === 'email-success') {
                app.innerHTML = `
                    <div class="container">
                        <div class="header" style="margin-bottom: 2rem;">
                            <div class="title-box">
                                <h1 class="title">ğŸ“§ ê²€ì‚¬ ê²°ê³¼ ì „ì†¡</h1>
                            </div>
                        </div>

                        <div class="success-card">
                            <span class="success-icon">âœ…</span>
                            <h2 class="success-title">ì „ì†¡ ì™„ë£Œ!</h2>
                            <p class="success-message">
                                ê²€ì‚¬ ê²°ê³¼ì™€ ì‹¤ì²œ ì „ëµì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                                ì…ë ¥í•˜ì‹  ì´ë©”ì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
                            </p>
                        </div>
                    </div>

                    <div class="footer-bar">
                        <button class="nav-pill" onclick="state.screen='intro'; resetTest(); render();">
                            ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
                        </button>
                    </div>
                `;
            }
        }

        // ì´ˆê¸° ë Œë”ë§
        render();
    </script>
</body>
</html>
